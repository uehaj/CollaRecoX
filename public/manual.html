<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CollaRecoX マニュアル - リアルタイム音声文字起こし</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Hiragino Sans', 'Noto Sans JP', sans-serif;
      line-height: 1.8;
      color: #333;
      background: #f5f5f5;
    }
    .container {
      max-width: 900px;
      margin: 0 auto;
      padding: 40px 20px;
    }
    header {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 60px 20px;
      text-align: center;
    }
    header h1 {
      font-size: 2.5em;
      margin-bottom: 10px;
    }
    header p {
      font-size: 1.2em;
      opacity: 0.9;
    }
    nav {
      background: white;
      padding: 20px;
      border-radius: 8px;
      margin-bottom: 30px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    nav h2 {
      font-size: 1.2em;
      margin-bottom: 15px;
      color: #667eea;
    }
    nav ul {
      list-style: none;
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
    }
    nav a {
      color: #667eea;
      text-decoration: none;
      padding: 8px 16px;
      background: #f0f0ff;
      border-radius: 20px;
      transition: all 0.3s;
    }
    nav a:hover {
      background: #667eea;
      color: white;
    }
    section {
      background: white;
      padding: 30px;
      border-radius: 8px;
      margin-bottom: 30px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    h2 {
      color: #667eea;
      font-size: 1.5em;
      margin-bottom: 20px;
      padding-bottom: 10px;
      border-bottom: 2px solid #667eea;
    }
    h3 {
      color: #444;
      font-size: 1.2em;
      margin: 25px 0 15px;
    }
    p {
      margin-bottom: 15px;
    }
    .step {
      display: flex;
      gap: 20px;
      margin-bottom: 25px;
      padding: 20px;
      background: #f8f9fa;
      border-radius: 8px;
      border-left: 4px solid #667eea;
    }
    .step-number {
      background: #667eea;
      color: white;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      flex-shrink: 0;
    }
    .step-content {
      flex: 1;
    }
    .step-content h4 {
      margin-bottom: 10px;
      color: #333;
    }
    .param-table {
      width: 100%;
      border-collapse: collapse;
      margin: 20px 0;
    }
    .param-table th, .param-table td {
      padding: 12px 15px;
      text-align: left;
      border-bottom: 1px solid #eee;
    }
    .param-table th {
      background: #f8f9fa;
      font-weight: 600;
      color: #667eea;
    }
    .param-table tr:hover {
      background: #f8f9fa;
    }
    .tip {
      background: #e8f5e9;
      border-left: 4px solid #4caf50;
      padding: 15px 20px;
      margin: 20px 0;
      border-radius: 0 8px 8px 0;
    }
    .tip::before {
      content: "💡 ヒント: ";
      font-weight: bold;
      color: #4caf50;
    }
    .warning {
      background: #fff3e0;
      border-left: 4px solid #ff9800;
      padding: 15px 20px;
      margin: 20px 0;
      border-radius: 0 8px 8px 0;
    }
    .warning::before {
      content: "⚠️ 注意: ";
      font-weight: bold;
      color: #ff9800;
    }
    .button-example {
      display: inline-block;
      padding: 10px 20px;
      background: #667eea;
      color: white;
      border-radius: 8px;
      margin: 5px;
    }
    .button-example.green {
      background: #4caf50;
    }
    .button-example.red {
      background: #f44336;
    }
    .button-example.gray {
      background: #9e9e9e;
    }
    code {
      background: #f0f0f0;
      padding: 2px 8px;
      border-radius: 4px;
      font-family: 'Monaco', 'Consolas', monospace;
    }
    .keyboard {
      display: inline-block;
      padding: 4px 10px;
      background: #fff;
      border: 1px solid #ccc;
      border-radius: 4px;
      box-shadow: 0 2px 0 #ccc;
      font-family: monospace;
    }
    footer {
      text-align: center;
      padding: 30px;
      color: #666;
    }
    .screenshot {
      display: block;
      max-width: 100%;
      margin: 20px auto;
      border: 1px solid #ddd;
      border-radius: 8px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    .screenshot-caption {
      text-align: center;
      font-size: 0.9em;
      color: #666;
      margin-top: 10px;
      margin-bottom: 20px;
    }
    @media (max-width: 600px) {
      header h1 {
        font-size: 1.8em;
      }
      .step {
        flex-direction: column;
      }
      nav ul {
        flex-direction: column;
      }
    }
  </style>
</head>
<body>
  <header>
    <p style="margin-bottom: 10px;"><a href="/" style="color: white; opacity: 0.8; text-decoration: none;">← システムトップに戻る</a></p>
    <h1>CollaRecoX</h1>
    <p>リアルタイム音声文字起こしアプリケーション</p>
  </header>

  <div class="container">
    <nav>
      <h2>目次</h2>
      <ul>
        <li><a href="#pages">ページ一覧</a></li>
        <li><a href="#overview">概要</a></li>
        <li><a href="#quickstart">クイックスタート</a></li>
        <li><a href="#microphone">マイク入力</a></li>
        <li><a href="#dummy-audio">録音データからの文字起こし</a></li>
        <li><a href="#parameters">パラメータ設定</a></li>
        <li><a href="#editor">共同校正機能</a></li>
        <li><a href="#troubleshooting">トラブルシューティング</a></li>
      </ul>
    </nav>

    <section id="pages">
      <h2>ページ一覧</h2>
      <p>CollaRecoXは以下のページで構成されています。</p>
      <table class="param-table">
        <tr>
          <th>ページ名</th>
          <th>URL</th>
          <th>説明</th>
        </tr>
        <tr>
          <td>トップページ</td>
          <td><a href="/">/</a></td>
          <td>システムの概要と各機能へのナビゲーション</td>
        </tr>
        <tr>
          <td>文字起こしの実行</td>
          <td><a href="/realtime">/realtime</a></td>
          <td>リアルタイム音声文字起こしのメイン画面。マイク入力や録音データからの文字起こしを実行</td>
        </tr>
        <tr>
          <td>録音データ作成</td>
          <td><a href="/dummy-recorder">/dummy-recorder</a></td>
          <td>テスト用の録音データを作成・管理。ファイルアップロードも可能</td>
        </tr>
        <tr>
          <td>共同編集画面</td>
          <td><a href="/editor/demo">/editor/{sessionId}</a></td>
          <td>文字起こし結果を複数人で同時編集。セッションIDでルームを共有</td>
        </tr>
        <tr>
          <td>マニュアル</td>
          <td><a href="/manual.html">/manual.html</a></td>
          <td>このマニュアルページ</td>
        </tr>
      </table>
    </section>

    <section id="overview">
      <h2>概要</h2>
      <p>
        CollaRecoXは、OpenAI GPT-4oモデルを使用したリアルタイム音声文字起こし、および共同校正のためのアプリケーションです。
        マイクからの音声入力や録音データをリアルタイムで文字に変換し、共同編集機能を使って
        テキストを共同作業として校正(編集)し、リアルタイムで共有することができます。
      </p>
      <h3>主な機能</h3>
      <ul style="margin-left: 20px; margin-bottom: 15px;">
        <li>リアルタイム音声文字起こし（マイク入力）</li>
        <li>録音データからの文字起こし</li>
        <li>VAD（音声区間検出）による自動文字起こし</li>
        <li>共同校正機能（リアルタイム同期）</li>
        <li>AI再編機能（GPT-4による自動編集）</li>
        <li>Markdown編集機能</li>
        <li>文字起こし結果のコピー・クリア</li>
      </ul>

      <h3>料金目安（OpenAI API）</h3>
      <div class="warning">
        料金はOpenAIの価格改定により変更される場合があります。最新の料金は<a href="https://openai.com/api/pricing/" target="_blank">OpenAI公式サイト</a>でご確認ください。
      </div>
      <table class="param-table">
        <tr>
          <th>機能</th>
          <th>使用モデル</th>
          <th>料金目安</th>
        </tr>
        <tr>
          <td>リアルタイム文字起こし</td>
          <td>GPT-4o Realtime</td>
          <td>約$0.06〜0.24/分（入力・出力により変動）</td>
        </tr>
        <tr>
          <td>AI再編</td>
          <td>GPT-4.1-mini（デフォルト）<br>GPT-4o-mini / GPT-4o / GPT-4.1</td>
          <td>テキスト量により変動（通常は数セント/回）</td>
        </tr>
      </table>
    </section>

    <section id="quickstart">
      <h2>クイックスタート</h2>

      <div class="step">
        <div class="step-number">1</div>
        <div class="step-content">
          <h4>アプリケーションにアクセス</h4>
          <p>ブラウザで <code>https://genai.dgi.ntt-tx.co.jp:8000/realtime</code> にアクセスしトップ画面を表示します。</p>
        </div>
      </div>
      <div class="step">
        <div class="step-number">2</div>
        <div class="step-content">
      トップ画面から「文字起こしの実行 →」を選択すると以下の画面になります。
      <img src="/images/realtime-page.png" alt="文字起こし実行画面" class="screenshot">
      <p class="screenshot-caption">図: 文字起こし実行画面（/realtime）</p>

         </div>
        </div>

      <div class="step">
        <div class="step-number">3</div>
        <div class="step-content">
          <h4>音声認識モデルの選択（任意）</h4>
          <p>「音声認識モデル」プルダウンから使用するモデルを選択します。デフォルトは「GPT-4o Transcribe（高精度）」です。</p>
        </div>
      </div>

      <h3 style="margin-top: 40px; margin-bottom: 20px; color: #667eea;">共同編集で文字起こし結果を共有する</h3>
      <p style="margin-bottom: 20px;">文字起こし結果を複数人で同時に編集・校正するため、文字起こし開始前に共同校正セッションを作成します。</p>

      <div class="step">
        <div class="step-number">4</div>
        <div class="step-content">
          <h4>セッションの作成</h4>
          <p>「共同校正セッション管理」セクションの <span class="button-example">共同校正セッションの作成</span> ボタンをクリックします。セッションIDが自動生成されます。</p>
        </div>
      </div>

      <div class="step">
        <div class="step-number">5</div>
        <div class="step-content">
          <h4>共同編集画面を開く</h4>
          <p><span class="button-example">共同校正セッションを開く</span> ボタンをクリックすると、共同編集画面が新しいタブで開きます。</p>
        </div>
      </div>

      <div class="step">
        <div class="step-number">6</div>
        <div class="step-content">
          <h4>URLを共有</h4>
          <p>共同編集画面で <span class="button-example">URLをコピー</span> ボタンをクリックし、共有したいメンバーにURLを送ります。同じURLにアクセスすると、リアルタイムで編集内容が同期されます。</p>
        </div>
      </div>

      <h3 style="margin-top: 40px; margin-bottom: 20px; color: #667eea;">文字起こしの実行</h3>

      <div class="step">
        <div class="step-number">7</div>
        <div class="step-content">
          <h4>録音開始（自動接続）</h4>
          <p><span class="button-example green">音声入力で文字起こし</span> ボタンをクリックして録音を開始します。<strong>OpenAI APIへの接続は自動的に行われます</strong>。初回はブラウザからマイクへのアクセス許可を求められるので「許可」をクリックしてください。</p>
        </div>
      </div>

      <div class="step">
        <div class="step-number">8</div>
        <div class="step-content">
          <h4>文字起こし</h4>
          <p>マイクに向かって話すと、リアルタイムで文字起こしが行われます。結果は「文字起こし結果」エリアに表示されます。</p>
          <p style="margin-top: 10px; font-size: 0.9em; color: #666;">
            💡 VB-Cable等の仮想音声デバイスを使用すると、TeamsやZoomなど他のアプリケーションの音声も文字起こしできます。
          </p>
          <p style="margin-top: 10px; font-size: 0.9em; color: #666;">
	    💡 詳しくは<a href="#microphone">マイク入力やVB-Cable経由の音声の文字起こし</a>セクションを参照してください。
	  </p>
        </div>
      </div>

      <div class="step">
        <div class="step-number">9</div>
        <div class="step-content">
          <h4>録音停止</h4>
          <p><span class="button-example red">⏹ 停止</span> ボタンをクリックして録音を停止します。停止後30秒で自動的にAPIとの接続が切断されます。</p>
        </div>
      </div>

      <div class="tip">
        共同校正セッションを作成していた場合、文字起こし結果が自動的に共同編集画面に送信されます。複数人で同時に校正作業を行えます。
      </div>
    </section>

    <section id="microphone">
      <h2>マイク入力やVB-Cable経由の音声の文字起こし</h2>
      <p>
        マイクや他の音声を再生するアプリの出力からリアルタイムで音声を取得し、文字起こしを行います。
        VAD（音声区間検出）機能により、音声が検出された部分のみを処理することもできます。
      </p>

      <h3>操作方法</h3>
      <ol style="margin-left: 20px;">
        <li>「音声入力からの文字起こし」セクションの <span class="button-example green">音声入力で文字起こし</span> ボタンをクリック（自動的にサーバーに接続されます）</li>
        <li>マイクに向かって話す</li>
        <li>文字起こし結果が下部に表示される</li>
        <li><span class="button-example red">⏹ 停止</span> ボタンで停止（停止後30秒で自動切断）</li>
      </ol>

      <div class="warning">
        OpenAI Realtime APIは1セッション最大60分の制限があります。60分を超えると自動的に切断されますので、再度「音声入力で文字起こし」ボタンを押して再接続してください。
      </div>

      <div class="tip">
        録音中も <span class="button-example">📋 コピー</span> ボタンで現在の文字起こし結果をコピーできます。
      </div>

      <h3>仮想音声デバイス（VB-Cable）を使った文字起こし</h3>
      <p>
        VB-Cable等の仮想音声デバイスを使用すると、Microsoft TeamsやZoomなどの
        オンライン会議の音声をリアルタイムで文字起こしできます。
      </p>
      <ol style="margin-left: 20px;">
        <li>VB-Cableをインストール（<a href="https://vb-audio.com/Cable/" target="_blank">公式サイト</a>からダウンロード）</li>
        <li>PCのサウンド設定で「VB-Cable」を出力デバイスに設定</li>
        <li>PCのサウンド設定で「VB-Cable」を入力デバイスに設定</li>
        <li>実行しているアプリ(TeamsやZoomなど)の出力音声がCollaRecoXの
	  入力として処理され、リアルタイムで文字起こしされます</li>
      </ol>

      <div class="warning">
        CollaRecoXを表示中のブラウザ自体からの音声は認識対象になりません。
        例えば、ChromeでCollaRecoXを実行している場合、同じChromeの別タブで再生しているYouTube動画などの音声は文字起こしできません。
        別プロセスのアプリケーション（Teams, Zoom, Firefoxなど）で再生する音声のみが認識可能です。
      </div>
    </section>

    <section id="dummy-audio">
      <h2>録音データからの文字起こし</h2>
      トップ画面から「録音データ作成 →」を選択すると以下の画面になります。ここでは、「文字起こしの実行」の画面の「録音データからの文字起こし」で選択できる、録音データを作成することができます。
          <p style="margin-top: 10px; font-size: 0.9em; color: #666;">
            💡 録音データは、ブラウザで録音すること(マイクもしくはVB-Cableを試用)、およびローカルファイルをアップロードすることで作成することができます。
          </p>
          <p style="margin-top: 10px; font-size: 0.9em; color: #666;">
	    💡 ここで「アップロード」といっていますが、実際にはアップロードしたファイルは、ブラウザ内のIndexDBに保存されており、サーバサイドにアップロードされることはありません。
	  </p>
      
      <img src="/images/dummy-recorder.png" alt="録音データ作成画面" class="screenshot">
      <p class="screenshot-caption">図: 録音データ作成画面（/dummy-recorder）</p>
      <p>
        事前に録音した音声データを選択し、文字起こしを行うことができます。
        長時間の音声ファイルも処理可能です。
      </p>

      <h3>操作方法</h3>
      <ol style="margin-left: 20px;">
        <li>「文字起こしの実行」の画面に行き、マイクやアプリからの文字起こしと同じ手順でパラメータ設定行なう</li>
	<li>「録音データからの文字起こし」セクションのプルダウンから音声ファイルを選択</li>
        <li><span class="button-example">▶ 送信</span> ボタンをクリック</li>
        <li>処理の進捗が表示される</li>
        <li>完了すると文字起こし結果が表示される</li>
      </ol>

      <div class="warning">
        録音データの処理中は他の操作（マイク入力など）はできません。
      </div>
    </section>

    <section id="parameters">
      <h2>パラメータ設定</h2>
      <p>文字起こしの品質や動作を調整するためのパラメータを設定できます。パラメータは「文字起こしの実行」画面で設定します。</p>

      <h3>音声認識モデル</h3>
      <p>使用する音声認識モデルを選択します。</p>
      <table class="param-table">
        <tr>
          <th>モデル</th>
          <th>特徴</th>
        </tr>
        <tr>
          <td>GPT-4o Transcribe（高精度）</td>
          <td>最も高精度な文字起こしが可能。専門用語や固有名詞の認識に優れる。推奨設定。</td>
        </tr>
        <tr>
          <td>GPT-4o Mini Transcribe（高速）</td>
          <td>処理速度が速く、リアルタイム性を重視する場合に適する。精度はやや劣る。</td>
        </tr>
        <tr>
          <td>Whisper-1</td>
          <td>OpenAIの従来モデル。互換性のために残されている。</td>
        </tr>
      </table>

      <h3>バッファサイズとバッチ数</h3>
      <p>
        音声データをサーバーに送信する際の設定です。これらのパラメータは、リアルタイム性と安定性のバランスに影響します。
      </p>
      <table class="param-table">
        <tr>
          <th>パラメータ</th>
          <th>説明</th>
          <th>推奨値</th>
        </tr>
        <tr>
          <td>バッファサイズ</td>
          <td>
            1回の音声データ取得で蓄積するサンプル数。値が大きいほど1回あたりの処理量が増え、
            CPU負荷は下がりますが、遅延が増加します。値が小さいと遅延は減りますが、
            処理頻度が上がりCPU負荷が増加します。
          </td>
          <td>4096（低遅延）〜 16384（安定）</td>
        </tr>
        <tr>
          <td>バッチ数</td>
          <td>
            バッファを何回分まとめてサーバーに送信するか。値が大きいほど1回の送信データ量が増え、
            ネットワーク効率は上がりますが、文字起こし結果の表示までの遅延が増加します。
            値が小さいとリアルタイム性は上がりますが、API呼び出し頻度が増加します。
          </td>
          <td>8（リアルタイム重視）〜 16（安定重視）</td>
        </tr>
      </table>

      <div class="tip">
        ネットワークが不安定な環境では、バッファサイズとバッチ数を大きめに設定すると安定します。
        逆に、高速なネットワーク環境では小さめの値にすることで、より即時的な文字起こしが可能です。
      </div>

      <div class="warning">
        バッファサイズとバッチ数の積が大きすぎると、「Invalid message format」エラーが発生することがあります。
        エラーが出る場合は、バッファサイズ 4096、バッチ数 8 の組み合わせをお試しください。
      </div>

      <h3>VAD（Voice Activity Detection：音声区間検出）設定</h3>
      <p>
        VADは、音声が含まれている区間を自動検出する機能です。無音部分を除外することで、
        効率的な文字起こしと正確な文の区切りを実現します。
      </p>
      <table class="param-table">
        <tr>
          <th>パラメータ</th>
          <th>説明</th>
          <th>推奨値</th>
        </tr>
        <tr>
          <td>VAD有効</td>
          <td>
            音声区間検出機能のON/OFF。ONにすると、音声が検出された部分のみを処理対象とし、
            無音部分は自動的にスキップされます。OFFにすると、すべての音声データが処理されます。
          </td>
          <td>ON</td>
        </tr>
        <tr>
          <td>VAD閾値</td>
          <td>
            音声として検出する感度（0.0〜1.0）。値が低いほど小さな音も音声として検出します。
            値が高いと、はっきりした音声のみを検出します。
            <br>・0.1〜0.2：高感度（静かな環境向け、小声も拾う）
            <br>・0.3〜0.5：中感度（通常の会議室など）
            <br>・0.6以上：低感度（騒がしい環境向け）
          </td>
          <td>0.2（高感度）</td>
        </tr>
        <tr>
          <td>無音判定時間（Silence Duration）</td>
          <td>
            音声が途切れてから「発話終了」と判定するまでの待機時間（ミリ秒）。
            この時間が経過すると、それまでの音声が1つの発話として処理されます。
            値が短いと頻繁に文が区切られ、長いと一続きの発話として処理されます。
          </td>
          <td>3000ms（3秒）</td>
        </tr>
        <tr>
          <td>プレフィックスパディング</td>
          <td>
            音声検出された時点より前の音声データも含める時間（ミリ秒）。
            発話の出だし（「あの」「えーと」など）が切れるのを防ぎます。
          </td>
          <td>300ms</td>
        </tr>
      </table>

      <div class="tip">
        <strong>環境別の推奨設定：</strong><br>
        ・静かな会議室：VAD閾値 0.1〜0.2、無音判定時間 3000ms<br>
        ・通常のオフィス：VAD閾値 0.3、無音判定時間 2000ms<br>
        ・騒がしい環境：VAD閾値 0.5以上、無音判定時間 1500ms
      </div>

      <h3>プロンプト設定</h3>
      <p>
        文字起こしの精度を向上させるためのプロンプト（指示文）を設定できます。
      </p>
      <ul style="margin-left: 20px; margin-bottom: 15px;">
        <li><strong>プリセット使用：</strong>あらかじめ用意されたプロンプトから選択</li>
        <li><strong>カスタムプロンプト：</strong>独自のプロンプトを入力</li>
      </ul>
      <p>
        プロンプトには、文字起こし対象の文脈や専門用語を含めると効果的です。
        例えば、「これはIT技術に関する会議です。AWS、Kubernetes、Docker等の用語が含まれます。」のように指定すると、
        専門用語の認識精度が向上します。
      </p>

      <h3>自動改行</h3>
      <p>
        「自動的に改行を入れる」をONにすると、文脈が変わるポイントで適切に改行が挿入され、
        読みやすい段落構造になります。長い会議の文字起こしなどで有効です。
      </p>
    </section>

    <section id="editor">
      <h2>共同校正機能</h2>
      <img src="/images/editor-page.png" alt="共同編集画面" class="screenshot">
      <p class="screenshot-caption">図: 共同編集画面（/editor/{sessionId}）</p>
      <p>
        文字起こし結果を共同校正セッションと連携させることができます。
        複数人で同時に編集内容を共有できます。
      </p>

      <h3>セッションの作成・参加</h3>
      <ol style="margin-left: 20px;">
        <li>「共同校正セッション」セクションで <span class="button-example">新規セッションを作成</span> をクリック</li>
        <li>セッションIDが自動生成される</li>
        <li><span class="button-example">共同校正セッションを開く</span> で校正画面を開く</li>
        <li>URLを共有して他のユーザーを招待</li>
      </ol>

      <h3>既存セッションへの参加</h3>
      <ol style="margin-left: 20px;">
        <li>セッションIDを入力欄に入力</li>
        <li><span class="button-example green">参加</span> ボタンをクリック</li>
      </ol>

      <h3>共同編集画面の機能</h3>
      <p>共同編集画面では、以下の機能が利用できます。</p>

      <h4 style="margin-top: 20px; color: #555;">ツールバー機能</h4>
      <table class="param-table">
        <tr>
          <th>ボタン</th>
          <th>説明</th>
        </tr>
        <tr>
          <td><span class="button-example">URLをコピー</span></td>
          <td>共同編集画面のURLをクリップボードにコピー。他のユーザーに共有する際に使用</td>
        </tr>
        <tr>
          <td><span class="button-example green">テキストをコピー</span></td>
          <td>エディタ内のすべてのテキストをクリップボードにコピー</td>
        </tr>
        <tr>
          <td><span class="button-example" style="background: #9333ea;">AI再編</span></td>
          <td>選択したテキストをAIで再編集（詳細は下記）</td>
        </tr>
        <tr>
          <td><span class="button-example" style="background: #4f46e5;">Markdown編集</span></td>
          <td>選択したテキストをMarkdown形式で直接編集（詳細は下記）</td>
        </tr>
        <tr>
          <td>フォントサイズ（小/中/大）</td>
          <td>エディタのフォントサイズを変更</td>
        </tr>
        <tr>
          <td>編集ハイライト表示</td>
          <td>他のユーザーの編集箇所を色付き下線で表示（デフォルトON）</td>
        </tr>
        <tr>
          <td><span class="button-example" style="background: #f97316;">🎤 認識確定</span></td>
          <td>音声バッファを強制的にコミットし、即座に認識結果を取得（文字起こし中のみ有効）</td>
        </tr>
      </table>

      <h4 style="margin-top: 25px; color: #555;">AI再編機能</h4>
      <p>選択したテキストをAI（GPT-4シリーズ）で自動編集できます。</p>
      <ol style="margin-left: 20px;">
        <li>編集したいテキストを選択</li>
        <li><span class="button-example" style="background: #9333ea;">AI再編</span> ボタンをクリック</li>
        <li>モーダルダイアログで編集プロンプトを入力（必須）</li>
        <li>テンプレートから選択して追加することも可能</li>
        <li>「AI再編を実行」をクリック</li>
        <li>変更箇所がDiff表示（削除は赤＋取り消し線、追加は緑＋下線）されるので確認</li>
        <li>「適用」で反映、または「戻る」で再編集</li>
      </ol>

      <p style="margin-top: 15px;"><strong>用意されているテンプレート：</strong></p>
      <ul style="margin-left: 20px; margin-bottom: 15px;">
        <li>見出し追加 - パラグラフごとに見出しを追加</li>
        <li>パラグラフ分割 - 内容をパラグラフに分割</li>
        <li>文の結合 - 不要な句読点で途切れた文を結合</li>
        <li>誤字脱字修正 - 誤字脱字を修正</li>
        <li>句読点整理 - 句読点を適切な位置に配置</li>
        <li>敬語に変換 - です・ます調に変換</li>
        <li>箇条書き化 - 内容を箇条書きに変換</li>
        <li>要約 - 内容を簡潔に要約</li>
        <li>日時挿入 - 文章の先頭に現在日時を挿入</li>
        <li>URL→リンク - URLをMarkdownリンク形式に変換</li>
      </ul>

      <div class="tip">
        テンプレートは複数組み合わせて使用できます。ボタンをクリックするごとにプロンプトに追記されます。
      </div>

      <h4 style="margin-top: 25px; color: #555;">Markdown編集機能</h4>
      <p>選択したテキストをMarkdown形式で直接編集できます。リンクの挿入などに便利です。</p>
      <ol style="margin-left: 20px;">
        <li>編集したいテキストを選択</li>
        <li><span class="button-example" style="background: #4f46e5;">Markdown編集</span> ボタンをクリック</li>
        <li>テキストがMarkdown形式で表示されるので編集</li>
        <li>「適用」でHTMLに変換して反映</li>
      </ol>

      <p style="margin-top: 15px;"><strong>使用可能なMarkdown記法：</strong></p>
      <ul style="margin-left: 20px; margin-bottom: 15px;">
        <li><code>**太字**</code> → <strong>太字</strong></li>
        <li><code>*斜体*</code> → <em>斜体</em></li>
        <li><code>[リンクテキスト](URL)</code> → リンク</li>
        <li><code># 見出し</code> → 見出し</li>
        <li><code>- リスト項目</code> → リスト</li>
      </ul>

      <h4 style="margin-top: 25px; color: #555;">編集ハイライト</h4>
      <p>
        他のユーザーが編集した箇所は、そのユーザーの色で下線表示されます。
        誰がどの部分を編集したかが一目でわかります。
        ツールバーのチェックボックスでON/OFFを切り替えられます。
      </p>
    </section>

    <section id="troubleshooting">
      <h2>トラブルシューティング</h2>

      <h3>マイクが認識されない</h3>
      <ul style="margin-left: 20px;">
        <li>ブラウザの設定でマイクへのアクセスが許可されているか確認</li>
        <li>他のアプリケーションがマイクを使用していないか確認</li>
        <li>ページをリロードして再度許可</li>
      </ul>

      <h3>文字起こしが開始されない</h3>
      <ul style="margin-left: 20px;">
        <li>インターネット接続を確認</li>
        <li>WebSocket接続が確立されているか確認（ステータス表示）</li>
        <li>ページをリロードして再接続</li>
      </ul>

      <h3>文字起こし精度が低い</h3>
      <ul style="margin-left: 20px;">
        <li>マイクに近づいて話す</li>
        <li>周囲の騒音を減らす</li>
        <li>VAD閾値を調整する</li>
        <li>プロンプト欄に専門用語や固有名詞を入力する</li>
      </ul>

      <h3>エラー: "Invalid message format"</h3>
      <ul style="margin-left: 20px;">
        <li>バッファサイズとバッチ数を小さくする</li>
        <li>推奨: バッファサイズ 4096、バッチ数 8</li>
      </ul>
    </section>
  </div>

  <footer>
    <p>CollaRecoX - リアルタイム音声文字起こしアプリケーション</p>
    <p>Powered by OpenAI GPT-4o</p>
  </footer>
</body>
</html>
