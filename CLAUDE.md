# 全体方針

まず、イシュー(ISSUE.md)を確認します。イシューがなければ指示をうけてイシューを作成します。
イシュー作成後に、計画(PLAN.md)を作成し、確認をとります。
確認後にタスクリストに従い作業を行います。

一時的な分析結果などの情報は、プロジェクトトップのworking配下に保存してください。

# コマンド

以下はコマンドです。

## develop_mcp_sevrer

利用者の指示にしたがって開発をおこないます。
develop_mcp_serverという指示をうけたら、以下のファイルを読み込んで指示にしたがって。

- MCP_TypeScript_SDK.md
- MCP.md

読みこんだあと何かをする必要はありません。

## save_context

save_context という指示を受けたら、ここまでのISSUE.mdにたいする進捗状況を、
プロジェクトやカレントディレクトリなどを記録含めて./worklog/PROGRESS.mdというファイルに
保存します。この際、「PROGRESS_YYMMDDHHMMSS.txt」というファイルとして作成したうえで、
それを「PROGRESS.txt」に上書きコピーします。。
「YYMMDDHHMMSS」は実際のタイムスタンプです。
この記録は、会話を次の会話にもちこすために作成するものです。

## load_context

load_context という指示を受けたら、保存されている./work-historyのcontext_latest.txtを
読み込んでその内容の指示にしたがって。

なお、読み込みがおわったときにタスク実行は絶対に開始しないでください。

load_contextコマンドを実行した直後に書き換えをはじめないでください。
ユーザに何をするか最初に確認し、指示をまってください。


ISSUE.mdを表示して、現在取り組んでいる課題を表示してください。

## create_issue

ユーザーに、やりたいことの内容をヒアリングして、以下のイシュー管理チケット(ISSUE.md)を作成します。

# イシュー管理

ユーザが今依頼している実行しているイシューをはISSUE.mdというファイル名で
tasks/ディレクトリ直下に以下のフォーマットで作成し管理します。完了したイシューは、
worklog配下にworklog/ISSUE_closed_YYYYMMDD.mdというファイル名にして移動します。

```ISSUE.md
# チケット： タイトル
## 概要
<!-- このチケットで解決したい課題 -->

## 関連リンク

# 受け入れ条件
<!-- チケットをクローズできる条件を状態として表現する -->

# 心配事
<!-- チケットを進めるうえでハードルとなりそうな懸念点を列挙します -->

# タスク
<!-- チケットの見積もりを行うために、必要なタスクを列挙します -->

# 成果物
<!-- PR以外の成果物のリンクを記載 -->

# 振り返り
<!-- チケットを進める過程で発生したトラブル等 -->

```

# タスクへの分解

ユーザからイシューを依頼された際、ユーザは何を求めているのかよく考えてtasks/PLAN.mdを作成します。
PLAN.mdを作成する際には、現時点でPLAN.mdにのこっているタスクをのこすかいったん保留するかをユーザに確認する。

保留するという答えを得たなら、tasks/PLAN.md中の完了していないタスクを
tasks/PENDINGS.mdに追記する。そしてこれからやるべきことを以下の型式の
tasks/PLAN.mdにマークダウン形式に書き起こす。タスクの順序は戦略的に依存関係を
考慮して作成してください。

```PLAN.md
# Issueの計画

<!-- Issueの計画を立てます。ユーザーストーリーに分解し、一つ一つにタスクを洗い出します。-->

## Story-1: {ペルソナ}として{機能}により{価値}を得る

{ストーリーの内容を記載します。}

### タスク

- [ ] タスク1
- [ ] タスク2
- [ ] タスク3

```

・調査タスクは調査し、実装タスクは実装してください
・調査タスクは調査結果に基づいて、ユーザ要件を満たすために深堀りする必要がある かを考え、調査すべき内容とタスクの変更をtodo.mdに更新すること
・更新されたタスクに基づいて続けて実施してください


# イシューとタスクの完了

イシューを完了するまえに、状況を報告し、ユーザにクローズしてよいかの確認をかならずとってください。
コミットしてよいかどうかも、ユーザに確認をとってください。

確認ができた場合、完了したイシューは、
worklog配下にworklog/ISSUE_closed_YYYYMMDD.mdというファイル名にして移動します。
完了したイシューに所属するPLAN.mdは
worklog配下にworklog/PLAN_closed_YYYYMMDD.mdというファイル名にして移動します。


# TypeScript

TypeScriptの書き方として、enumの使用は禁止、文字列のUnion型または定数オブジェクトを使用する。namespaceも禁止。あとclassではなくobjectを多用して。関数型スタイルを意識して。オブジェクトリテラルとシンプルな関数を多用する


# 全体アーキテクチャについては以下に記載しています。

 docs/OVERVIEW.md


# 禁止事項

load_contextしたときに即座にタスク開始はしないこと。
読み込みがおわったときにタスク実行は絶対に開始しないでください。
